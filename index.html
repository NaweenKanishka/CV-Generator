<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart CV Builder</title>
  <style>
    :root {
      --font-main: "Georgia", "Times New Roman", serif;
      --font-size-base: 12pt;
      --font-size-heading: 16pt;
      --a4-width: 210mm;
      --a4-height: 297mm;
      --primary-color: #2c3e50;
      --secondary-color: #ecf0f1;
      --accent-color: #3498db;
      --border-color: #bdc3c7;
      --button-color: #2980b9;
      --button-hover: #1d5d8a;
      --delete-button-color: #e74c3c;
      --delete-button-hover: #c0392b;
    }

    * {
      box-sizing: border-box;
    }
    #all-cont-inCV{
      margin: auto;
      justify-content: center;
      max-width: 1600px;
    }

    body {
      margin: 0;
      font-family: var(--font-main);
      font-size: var(--font-size-base);
      background-color: var(--secondary-color);
      overflow-x: hidden;
      overflow-y: auto;
      min-height: 100vh;
    }


    .container {
      display: flex;
      flex-direction: row;
      width: 100%;
      height: 100%;
    }

    .form-section,
    .preview-section {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .form-section {
      background-color: #ffffff;
      border-right: 1px solid var(--border-color);
    }

    h2 {
      font-size: var(--font-size-heading);
      margin-top: 0;
      color: var(--primary-color);
    }

    input,
    textarea,
    button {
      font-family: var(--font-main);
      font-size: var(--font-size-base);
    }

    input,
    textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background-color: #ffffff;
    }

    .preview {
      background-color: white;
      width: 100%;
      max-width: var(--a4-width);
      min-height: var(--a4-height);
      padding: 25.4mm 20mm;
      margin: 0 auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .section {
      margin-bottom: 20px;
    }

    .section h3 {
      font-size: var(--font-size-heading);
      border-bottom: 2px solid var(--primary-color);
      padding-bottom: 2px;
      margin-bottom: 10px;
      color: var(--primary-color);
    }

    .subtopic {
      margin-bottom: 6px;
    }

    .subtopic-title {
      font-weight: bold;
    }

    /*ul {
  margin: 5px 0 10px 4px;
  color: var(--primary-color);
}*/

    ul {
      margin-top: 4px;
      margin-left: 1.2em;
      /* controls how far the bullets are from the edge */
      padding-left: 1em;
      /* additional spacing inside the bullet block */
      list-style-position: outside;
      /* ensures bullets are outside the text box */
    }

    li {
      margin-bottom: 4px;
      /* spacing between each bullet */
      padding-left: 0.2em;
      /* controls space between bullet and text */
    }


    .controls {
      display: flex;
      gap: 5px;
      margin-bottom: 5px;
      flex-wrap: wrap;
    }

    .controls input {
      flex: 1;
      min-width: 100px;
    }

    .delete-btn {
      background: var(--delete-button-color);
      border: none;
      color: white;
      padding: 4px 8px;
      font-size: 10pt;
      border-radius: 3px;
      cursor: pointer;
    }

    .delete-btn:hover {
      background: var(--delete-button-hover);
    }

    .print-btn,
    .add-section-btn {
      margin-top: 10px;
      padding: 8px 16px;
      background: var(--button-color);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .print-btn:hover,
    .add-section-btn:hover {
      background: var(--button-hover);
    }

    /* Print view */
    @media print {
      body * {
        visibility: hidden;
      }

      .preview,
      .preview * {
        visibility: visible;
      }

      .preview {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        box-shadow: none;
      }
    }

    /* Responsive: Small screens */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
        height: auto;
      }

      .container {
        flex-direction: column;
      }

      .form-section,
      .preview-section {
        width: 100%;
        height: auto;
        padding: 15px;
        border: none;
      }

      .preview {
        padding: 15px;
        width: 100%;
        max-width: 100%;
        min-height: auto;
        box-shadow: none;
      }

      .controls {
        flex-direction: column;
      }

      .controls input {
        width: 100%;
      }

      #preview-contacts p {
        margin: 2px 0;
        line-height: 1.2;
      }




    }
  </style>


</head>

<body>
  <div class="all-cont-inCV" id="all-cont-inCV">
    <div class="container">

      <div class="form-section">
        <h2>CV Builder</h2>

        <div class="select-font">
          <h3>Select Font</h3>
          <select onchange="changeFont(this.value)">
            <option value="Georgia">Georgia</option>
            <option value="Arial">Arial</option>
            <option value="Verdana">Verdana</option>
          </select>
        </div>

        <div id="name-section">
          <h3>Your Name</h3>
          <div class="controls">
            <input type="text" id="name-input" placeholder="Enter your name" oninput="updateName()">
            <button class="delete-btn" onclick="resetName()">Delete</button>
          </div>
        </div>

        <div id="contacts-container">
          <h3>Contact Info</h3>
        </div>
        <button onclick="addContactField()">+ Add Contact Field</button>

        <div id="sections-container">
          <h3>Sections</h3>
        </div>
        <button class="add-section-btn" onclick="addSection()">+ Add Section</button>
        <button class="print-btn" onclick="window.print()">Print CV</button>
      </div>

      <div class="preview-section">
        <div class="preview">
          <div class="section">
            <h2 id="preview-name">Your Name</h2>
            <div id="preview-contacts"></div>
          </div>
          <div id="preview-sections"></div>
        </div>
      </div>
    </div>
  </div>


  <script>
    let contactCount = 0;
    let sectionCount = 0;
    let subtopicCount = 0;

    function addContactField() {
      const id = contactCount++;
      const container = document.getElementById("contacts-container");

      const div = document.createElement("div");
      div.className = "controls";
      div.id = `contact-${id}`;
      div.innerHTML = `
        <input type="text" placeholder="Label (e.g., Email)" oninput="updateContact(${id})" id="contact-label-${id}">
        <input type="text" placeholder="Detail (e.g., you@example.com)" oninput="updateContact(${id})" id="contact-value-${id}">
        <button class="delete-btn" onclick="removeContact(${id})">Delete</button>
      `;
      container.appendChild(div);

      const preview = document.createElement("p");
      preview.id = `preview-contact-${id}`;
      document.getElementById("preview-contacts").appendChild(preview);
    }

    function updateContact(id) {
      const label = document.getElementById(`contact-label-${id}`).value;
      const value = document.getElementById(`contact-value-${id}`).value;
      const preview = document.getElementById(`preview-contact-${id}`);
      preview.textContent = label && value ? `${label}: ${value}` : "";
    }

    function removeContact(id) {
      document.getElementById(`contact-${id}`)?.remove();
      document.getElementById(`preview-contact-${id}`)?.remove();
    }

    function addSection() {
      const sectionId = sectionCount++;
      const container = document.getElementById("sections-container");

      const sectionDiv = document.createElement("div");
      sectionDiv.id = `section-${sectionId}`;
      sectionDiv.innerHTML = `
        <div class="controls">
          <input type="text" placeholder="Section Title" value="New Section" oninput="updateSectionTitle(${sectionId})" id="section-title-${sectionId}">
          <button class="delete-btn" onclick="removeSection(${sectionId})">Delete</button>
        </div>
        <div id="subtopics-${sectionId}"></div>
        <button onclick="addSubtopic(${sectionId})">+ Add Subtopic</button>
      `;
      container.appendChild(sectionDiv);

      // Preview
      const previewContainer = document.getElementById("preview-sections");
      const previewSection = document.createElement("div");
      previewSection.className = "section";
      previewSection.id = `preview-section-${sectionId}`;
      previewSection.innerHTML = `
        <h3 id="preview-title-${sectionId}">New Section</h3>
        <div id="preview-subtopics-${sectionId}"></div>
      `;
      previewContainer.appendChild(previewSection);
    }

    function updateSectionTitle(sectionId) {
      const title = document.getElementById(`section-title-${sectionId}`).value;
      document.getElementById(`preview-title-${sectionId}`).textContent = title || "Untitled Section";
    }

    function removeSection(sectionId) {
      document.getElementById(`section-${sectionId}`)?.remove();
      document.getElementById(`preview-section-${sectionId}`)?.remove();
    }

    function addSubtopic(sectionId) {
      const subId = subtopicCount++;
      const subContainer = document.getElementById(`subtopics-${sectionId}`);

      const div = document.createElement("div");
      div.className = "subtopic";
      div.id = `sub-${subId}`;
      div.innerHTML = `
        <div class="controls">
          <input type="text" placeholder="Subtopic Title" oninput="updateSubtopic(${subId}, ${sectionId})" id="sub-title-${subId}">
          <button class="delete-btn" onclick="removeSubtopic(${subId}, ${sectionId})">Delete</button>
        </div>
        <textarea rows="3" placeholder="Bullet points, separated by line" oninput="updateSubtopic(${subId}, ${sectionId})" id="sub-content-${subId}"></textarea>
      `;
      subContainer.appendChild(div);

      const previewSub = document.createElement("div");
      previewSub.id = `preview-sub-${subId}`;
      document.getElementById(`preview-subtopics-${sectionId}`).appendChild(previewSub);
    }

    function updateSubtopic(subId, sectionId) {
      const title = document.getElementById(`sub-title-${subId}`).value;
      const content = document.getElementById(`sub-content-${subId}`).value;
      const preview = document.getElementById(`preview-sub-${subId}`);

      const bullets = content.split("\n").filter(line => line.trim() !== "").map(line => `<li>${line.trim()}</li>`).join("");

      preview.innerHTML = `
        <div class="subtopic">
          <div class="subtopic-title">${title}</div>
          <ul>${bullets}</ul>
        </div>
      `;
    }

    function removeSubtopic(subId, sectionId) {
      document.getElementById(`sub-${subId}`)?.remove();
      document.getElementById(`preview-sub-${subId}`)?.remove();
    }

    // Initial Load
    window.onload = () => {
      document.getElementById("preview-name").textContent = "Your Name";
      addContactField(); // Add default contact field
      addSection(); // Add default section
    };

    function updateName() {
      const name = document.getElementById("name-input").value;
      document.getElementById("preview-name").textContent = name || "Your Name";
    }

    function resetName() {
      document.getElementById("name-input").value = "";
      updateName();
    }

    // Save the current CV data into localStorage
    function saveData() {
      const cvData = {
        name: document.getElementById("name-input").value,
        contacts: [],
        sections: [],
      };

      // Save contact fields
      document.querySelectorAll("#contacts-container .controls").forEach((contact, idx) => {
        const label = contact.querySelector(`#contact-label-${idx}`).value;
        const value = contact.querySelector(`#contact-value-${idx}`).value;
        cvData.contacts.push({ label, value });
      });

      // Save sections and subtopics
      document.querySelectorAll("#sections-container .controls").forEach((section, idx) => {
        const title = section.querySelector(`#section-title-${idx}`).value;
        const subtopics = [];
        document.querySelectorAll(`#subtopics-${idx} .subtopic`).forEach((sub, subIdx) => {
          const subTitle = sub.querySelector(`#sub-title-${subIdx}`).value;
          const content = sub.querySelector(`#sub-content-${subIdx}`).value;
          subtopics.push({ title: subTitle, content });
        });
        cvData.sections.push({ title, subtopics });
      });

      localStorage.setItem("cvData", JSON.stringify(cvData));
    }

    // Auto-load the saved CV data from localStorage
    function loadData() {
      const cvData = JSON.parse(localStorage.getItem("cvData"));
      if (cvData) {
        document.getElementById("name-input").value = cvData.name;
        updateName();

        cvData.contacts.forEach(contact => {
          addContactField(contact.label, contact.value);
        });

        cvData.sections.forEach(section => {
          addSection(section.title);
          section.subtopics.forEach(sub => {
            addSubtopicToSection(section.title, sub.title, sub.content);
          });
        });
      }
    }

    window.onload = () => {
      loadData();
    };

    // Theme toggle (light/dark)
    function toggleTheme() {
      const body = document.body;
      body.classList.toggle("dark-theme");

      // Store theme preference in localStorage
      localStorage.setItem("theme", body.classList.contains("dark-theme") ? "dark" : "light");
    }

    // Change font
    function changeFont(font) {
      document.body.style.fontFamily = font;
      localStorage.setItem("font", font);
    }

    // Load theme and font from localStorage
    window.onload = () => {
      const savedTheme = localStorage.getItem("theme");
      const savedFont = localStorage.getItem("font");

      if (savedTheme === "dark") {
        document.body.classList.add("dark-theme");
      }
      if (savedFont) {
        document.body.style.fontFamily = savedFont;
      }

      loadData();
    };

  </script>
</body>

</html>